ADD_DEFINITIONS( ${QT_DEFINITIONS} )
ADD_DEFINITIONS( -DQT_PLUGIN )
ADD_DEFINITIONS( -DQT_SHARED )

IF( ${CMAKE_BUILD_TYPE} MATCHES "Debug" )
  ADD_DEFINITIONS( -DQT_DEBUG )
ELSE( ${CMAKE_BUILD_TYPE} MATCHES "Debug" )
  ADD_DEFINITIONS( -DQT_NO_DEBUG )
ENDIF( ${CMAKE_BUILD_TYPE} MATCHES "Debug" )

INCLUDE_DIRECTORIES( BEFORE ${GOFIGURE2_SOURCE_DIR}/Code/GUI/lib/Interfaces )

SET( IMAGEIDENTITY_PLUGIN_SRC identityplugin.cxx )
SET( IMAGEIDENTITY_PLUGIN_HDRS identityplugin.h )

QT4_WRAP_CPP( IMAGEIDENTITY_PLUGIN_MOC
  ${IMAGEIDENTITY_PLUGIN_HDRS} )

ADD_LIBRARY( ImageIdentityPlugin MODULE
  ${IMAGEIDENTITY_PLUGIN_MOC}
  ${IMAGEIDENTITY_PLUGIN_SRC}
  ${GOFIGURE2_SOURCE_DIR}/Code/GUI/lib/Interfaces/QGoImageFilterPluginBase.cxx
)

TARGET_LINK_LIBRARIES( ImageIdentityPlugin
  interface
  QGoLib
)

# ADD_EXECUTABLE( identityimagepluginExample
#   identitypluginMain.cxx
# )


# TARGET_LINK_LIBRARIES( identityimagepluginExample
#   ImageIdentityPlugin
# )

# ADD_TEST( identityimagepluginTest
#   ${EXECUTABLE_OUTPUT_PATH}/identityimagepluginExample
# )